# æ–°å—åŸ OnlineShop ç½‘ç«™é¡¹ç›® - å¼€å‘æŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

ä¸€ä¸ªå±•ç¤ºæ–°å—åŸï¼ˆMinecraftæœåŠ¡å™¨ï¼‰ç¤¾åŒºå»ºç­‘ã€æ´»åŠ¨å’Œæˆå‘˜çš„å®˜æ–¹ç½‘ç«™ã€‚åŒ…å«å¤šä¸ªç¤¾åŒºä¸»é¢˜é¡µé¢çš„å±•ç¤ºæŸœå’Œå›¾ç‰‡åº“ã€‚

**å…¨ç§°**: New NanCity Official Website
**ä»“åº“**: NewNanCity/newnancity.github.io
**éƒ¨ç½²**: GitHub Pages (page åˆ†æ”¯)
**æ¡†æ¶**: React + TypeScript + Vite

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **React 19.2.4** - UIæ¡†æ¶
- **TypeScript 5.9.3** - ç±»å‹å®‰å…¨
- **Vite 7.3.1** - å¿«é€Ÿæ„å»ºå·¥å…·
- **React Helmet Async** - SEOå’Œmetaæ ‡ç­¾ç®¡ç†

### æ ·å¼å’ŒUI
- **CSS3 + PostCSS** - æ ·å¼å¤„ç†
- **Responsive Design** - ç§»åŠ¨ç«¯é€‚é…
- ä½¿ç”¨SASS/SCSSè¿›è¡Œé«˜çº§æ ·å¼å®šä¹‰ï¼ˆåœ¨publicå­é¡¹ç›®ä¸­ï¼‰

### æ€§èƒ½ä¼˜åŒ–
- **å›¾ç‰‡å‹ç¼©**: process-images.js (Sharpåº“)
  - è‡ªåŠ¨è½¬æ¢ä¸ºWebPæ ¼å¼
  - ç¼©æ”¾è‡³1080pæœ€é•¿è¾¹
  - ç›®æ ‡æ–‡ä»¶å¤§å°â‰¤500KB

- **JavaScriptå‹ç¼©**: Terser (é€šè¿‡Vite)
- **ä»£ç åˆ†å‰²**: React vendoråˆ†ç¦»
- **Gzipé¢„å‹ç¼©**: vite-plugin-compression
  - è‡ªåŠ¨ç”Ÿæˆ.gzæ–‡ä»¶ä¾›CDNä¼ è¾“
  - gzipå‹ç¼©ç‡é€šå¸¸60-70%

### æ„å»ºå’Œéƒ¨ç½²
- **åŒ…ç®¡ç†**: pnpm 10.4.1
- **CI/CD**: GitHub Actions
  - è‡ªåŠ¨æ„å»ºã€å›¾ç‰‡å¤„ç†ã€å‹ç¼©ã€éƒ¨ç½²

- **CDNé…ç½®æ–‡ä»¶**:
  - Netlify é…ç½® (public/_headers)
  - Apache é…ç½® (public/.htaccess)
  - Nginx ç¤ºä¾‹é…ç½®

## ğŸ“ é¡¹ç›®ç»“æ„

```
MainPage/
â”œâ”€â”€ src/                           # React æºä»£ç 
â”‚   â”œâ”€â”€ components/               # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Hero.tsx             # é¦–é¡µè‹±é›„åŒº
â”‚   â”‚   â”œâ”€â”€ Gallery.tsx          # å›¾ç‰‡åº“å±•ç¤º
â”‚   â”‚   â”œâ”€â”€ Navbar.tsx           # å¯¼èˆªæ 
â”‚   â”‚   â”œâ”€â”€ ParticleCanvas.tsx   # ç²’å­æ•ˆæœèƒŒæ™¯
â”‚   â”‚   â””â”€â”€ ...å…¶ä»–ç»„ä»¶
â”‚   â”œâ”€â”€ hooks/                   # è‡ªå®šä¹‰React Hooks
â”‚   â”œâ”€â”€ context/                 # React Context (å…¨å±€çŠ¶æ€)
â”‚   â”œâ”€â”€ config/                  # é…ç½®æ–‡ä»¶ (SEOç­‰)
â”‚   â”œâ”€â”€ types/                   # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ styles/                  # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ main.tsx                 # Reactå…¥å£
â”‚
â”œâ”€â”€ public/                       # é™æ€èµ„æº
â”‚   â”œâ”€â”€ site-data.json           # å›¾ç‰‡å’Œæ´»åŠ¨æ•°æ®ï¼ˆè¢«process-images.jså¤„ç†ï¼‰
â”‚   â”œâ”€â”€ pic/                     # ç¤¾åŒºå›¾ç‰‡åº“ï¼ˆæ¥è‡ªprocess-images.jsçš„sourceï¼‰
â”‚   â”œâ”€â”€ _headers                 # Netlify CDNé…ç½®
â”‚   â”œâ”€â”€ .htaccess                # Apacheé…ç½®
â”‚   â”œâ”€â”€ CharmingSpring/          # é­…åŠ›æ˜¥å¤©ç¤¾åŒºä¸»é¢˜
â”‚   â”œâ”€â”€ Fctinue/                 # å¦ä¸€ä¸ªä¸»é¢˜
â”‚   â”œâ”€â”€ kayshatown/              # kayshatownä¸»é¢˜
â”‚   â”œâ”€â”€ taohuayuan/              # æ¡ƒèŠ±æºä¸»é¢˜
â”‚   â”œâ”€â”€ tyansec/                 # tyansecä¸»é¢˜
â”‚   â””â”€â”€ chenchun/                # chenchunä¸»é¢˜
â”‚
â”œâ”€â”€ scripts/                     # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ process-images.js        # â˜… å›¾ç‰‡ä¼˜åŒ–ï¼ˆSharpåº“ï¼‰
â”‚   â”‚   - è½¬æ¢ä¸ºWebPæ ¼å¼
â”‚   â”‚   - ç­‰æ¯”ç¼©æ”¾åˆ°1080p
â”‚   â”‚   - å¾ªç¯å‹ç¼©åˆ°â‰¤500KB
â”‚   â”‚   - æ›´æ–°site-data.json
â”‚   â”‚
â”‚   â”œâ”€â”€ compress-json.js         # JSONå‹ç¼©è„šæœ¬
â”‚   â””â”€â”€ batch_convert.py         # Pythonå›¾ç‰‡è½¬æ¢è„šæœ¬ï¼ˆå¤‡ç”¨ï¼‰
â”‚
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ deploy.yml           # GitHub Actionså·¥ä½œæµ
â”‚           - Node.js 22ç¯å¢ƒ
â”‚           - tscç¼–è¯‘TypeScript
â”‚           - vite build
â”‚           - æ‰§è¡Œprocess-images.js
â”‚           - æ‰§è¡Œcompress-json.js
â”‚           - éƒ¨ç½²åˆ°pageåˆ†æ”¯
â”‚
â”œâ”€â”€ docs/                        # æ–‡æ¡£
â”‚   â”œâ”€â”€ CDN-DEPLOYMENT.md       # CDNéƒ¨ç½²æŒ‡å—
â”‚   â””â”€â”€ ç‰›è…©å²ä¹¦.md             # é¡¹ç›®å†å²
â”‚
â”œâ”€â”€ vite.config.ts              # Viteæ„å»ºé…ç½®
â”‚   - outDir: ./dist
â”‚   - emptyOutDir: true
â”‚   - copyPublicDir: true
â”‚   - gzipé¢„å‹ç¼©é…ç½®
â”‚   - èµ„æºåˆ†ç±»è¾“å‡ºï¼ˆjs/css/img/fontsï¼‰
â”‚
â”œâ”€â”€ tsconfig.json               # TypeScriptç¼–è¯‘é…ç½®
â”œâ”€â”€ package.json                # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
â””â”€â”€ pnpm-lock.yaml             # ä¾èµ–é”å®šæ–‡ä»¶
```

## ğŸš€ å¸¸ç”¨å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
pnpm install

# æœ¬åœ°å¼€å‘ï¼ˆçƒ­åŠ è½½ï¼‰
pnpm run dev
# è®¿é—® http://localhost:5173

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬ï¼ˆæ‰§è¡Œå®Œæ•´æµç¨‹ï¼‰
pnpm run build
# æµç¨‹ï¼šTypeScriptç¼–è¯‘ â†’ Viteæ„å»º â†’ å›¾ç‰‡å¤„ç† â†’ JSONå‹ç¼©

# é¢„è§ˆç”Ÿäº§æ„å»º
pnpm run preview
```

## ğŸ–¼ï¸ å›¾ç‰‡å¤„ç†è¯¦è§£

### è‡ªåŠ¨åŒ–æµç¨‹
```
public/pic/xxx.jpg (åŸå§‹)
         â†“
  (vite build å¤åˆ¶)
         â†“
  dist/pic/xxx.jpg (1.67MB)
         â†“
  (process-images.js å¤„ç†)
         â†“
  dist/pic/xxx.webp (178KB, ç¼©æ”¾è‡³1080Ã—570)
         â†“
  (GitHub Actions éƒ¨ç½²)
         â†“
  GitHub Pages ä¸Šçš„æœ€ç»ˆæ–‡ä»¶
```

### è„šæœ¬é…ç½®å‚æ•°

```javascript
// scripts/process-images.js ä¸­çš„è®¾ç½®
const MAX_DIMENSION = 1080      // æœ€é•¿è¾¹åƒç´ æ•°
const MAX_FILE_SIZE = 500 * 1024 // ç›®æ ‡æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
const MIN_QUALITY = 40          // WebPæœ€ä½è´¨é‡
const MAX_QUALITY = 90          // WebPæœ€é«˜è´¨é‡
```

### ç¤ºä¾‹å‹ç¼©ç»“æœ
| åŸå§‹æ–‡ä»¶            | å¤„ç†å            | å‹ç¼©ç‡ |
| ------------------- | ----------------- | ------ |
| 6144Ã—3240, 1711.7KB | 1080Ã—570, 178.0KB | -89.6% |
| 4914Ã—3076, 978.7KB  | 1080Ã—677, 49.7KB  | -94.9% |
| 1024Ã—540, 516.6KB   | 1024Ã—540, 94.0KB  | -81.8% |

## ğŸŒ ç½‘ç«™ç»“æ„

### ä¸»è¦é¡µé¢
- `/` - é¦–é¡µï¼ˆReactåº”ç”¨å…¥å£ï¼‰
- `/pic/` - ç¤¾åŒºå›¾ç‰‡åº“ï¼ˆæ¥è‡ªsite-data.jsonï¼‰
- `/CharmingSpring/` - é­…åŠ›æ˜¥å¤©ä¸»é¢˜é¡µé¢
- `/Fctinue/` - Fctinueä¸»é¢˜é¡µé¢
- `/kayshatown/` - kayshatownä¸»é¢˜é¡µé¢
- `/taohuayuan/` - æ¡ƒèŠ±æºä¸»é¢˜é¡µé¢
- `/tyansec/` - tyansecä¸»é¢˜é¡µé¢

### æ•°æ®ç®¡ç†
**site-data.json** åŒ…å«ï¼š
- å›¾ç‰‡åº“æ•°æ®ï¼ˆpath, caption, dateç­‰ï¼‰
- ç¤¾åŒºä¿¡æ¯
- äº‹ä»¶æ—¥æœŸ
- æ’è¡Œæ¦œæ•°æ®

**process-images.js ä¼šè‡ªåŠ¨æ›´æ–°å›¾ç‰‡è·¯å¾„**ï¼š
- åŸ: `/pic/photo.jpg`
- å¤„ç†å: `/pic/photo.webp`

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### æ„å»ºäº§ç‰©å¤§å°
| æ–‡ä»¶                   | å¤§å°ï¼ˆæœªå‹ç¼©ï¼‰ | å¤§å°ï¼ˆgzipï¼‰ |
| ---------------------- | -------------- | ------------ |
| index.html             | 1.2 KB         | 0.7 KB       |
| site-data.json         | 33.17 KB       | 12.78 KB     |
| react-vendor-[hash].js | 11.21 KB       | 3.97 KB      |
| index-[hash].js        | 221.34 KB      | 69.42 KB     |
| å…¨éƒ¨å›¾ç‰‡ï¼ˆå¤„ç†åï¼‰     | 6.53 MB        | ~2.6 MB*     |

*å®é™…gzipå¤§å°å–å†³äºå›¾ç‰‡å†…å®¹çš„å¯å‹ç¼©æ€§

### ç¼“å­˜ç­–ç•¥
```
index.html: 1å°æ—¶ï¼ˆé¢‘ç¹æ›´æ–°ï¼‰
site-data.json: 1å°æ—¶ï¼ˆåŠ¨æ€å†…å®¹ï¼‰
assets/*: 1å¹´ï¼ˆé€šè¿‡content-hashç‰ˆæœ¬åŒ–ï¼‰
```

## ğŸ”§ å¼€å‘æµç¨‹

### æ·»åŠ æ–°å›¾ç‰‡
1. å°†å›¾ç‰‡æ”¾åˆ° `public/pic/` ç›®å½•
2. åœ¨ `public/site-data.json` ä¸­æ·»åŠ è®°å½•
3. è¿è¡Œ `pnpm run build` æœ¬åœ°æµ‹è¯•
4. æ£€æŸ¥ `dist/pic/` ä¸­çš„å‹ç¼©ç»“æœ
5. æäº¤å¹¶æ¨é€ï¼ŒGitHub Actionsä¼šè‡ªåŠ¨å¤„ç†

### ä¿®æ”¹é¡µé¢æ ·å¼
1. ç¼–è¾‘ `src/components/*.css` æ–‡ä»¶
2. Reactç»„ä»¶ä¸­è‡ªåŠ¨çƒ­æ›´æ–°
3. æœ€ç»ˆä¼šè¢«Viteæ‰“åŒ…å’Œå‹ç¼©

### æ›´æ–°ç¤¾åŒºä¸»é¢˜é¡µé¢
1. ç¼–è¾‘ `public/CharmingSpring/`, `public/Fctinue/` ç­‰ç›®å½•ä¸‹çš„HTML
2. è¿™äº›æ˜¯é™æ€é¡µé¢ï¼Œä¸ç»è¿‡Reactç¼–è¯‘ï¼Œç›´æ¥å¤åˆ¶åˆ°dist
3. Gzipå‹ç¼©ä¼šè‡ªåŠ¨åº”ç”¨

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### æ„å»ºå¤±è´¥
```bash
# æ¸…ç†å¹¶é‡æ–°æ„å»º
rm -r dist node_modules
pnpm install
pnpm run build
```

### å›¾ç‰‡æ²¡æœ‰å‹ç¼©
1. æ£€æŸ¥ `dist/pic/` ä¸­çš„æ–‡ä»¶å¤§å°
2. è¿è¡Œ `node scripts/process-images.js` æ‰‹åŠ¨æµ‹è¯•
3. æŸ¥çœ‹è„šæœ¬è¾“å‡ºï¼Œæ‰¾å‡ºå“ªäº›æ–‡ä»¶å¤„ç†å¤±è´¥

### ç½‘ç«™åŠ è½½æ…¢
1. æ£€æŸ¥æµè§ˆå™¨å¼€å‘è€…å·¥å…· Network æ ‡ç­¾
2. éªŒè¯å›¾ç‰‡æ˜¯å¦æ˜¯ WebP æ ¼å¼ï¼Œå¤§å°åº”â‰¤200KB
3. æ£€æŸ¥æ˜¯å¦æœ‰æœªå‹ç¼©çš„å¤§æ–‡ä»¶

### GitHub Pages æ›´æ–°æ…¢
1.æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼ˆCtrl+Shift+Rï¼‰
2. GitHub Pages é€šå¸¸éœ€è¦ 1-2 åˆ†é’Ÿæ›´æ–°
3. æ£€æŸ¥ GitHub Actions å·¥ä½œæµæ˜¯å¦æˆåŠŸ

## ğŸ“ ä»£ç è§„èŒƒ

### TypeScript
- ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ï¼š`"strict": true`
- ç±»å‹æ³¨è§£å¿…é¡»æ¸…æ™°
- é¿å… `any` ç±»å‹

### React
- å‡½æ•°å¼ç»„ä»¶ä¼˜å…ˆ
- ä½¿ç”¨ React Hooks (useState, useContext, useEffectç­‰)
- Props åº”å®šä¹‰ interface ç±»å‹

### æ–‡ä»¶å’Œå‘½å
- ç»„ä»¶æ–‡ä»¶ç”¨ PascalCaseï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰
- å…¶ä»–æ–‡ä»¶ç”¨ kebab-caseï¼ˆå°å†™-åˆ†éš”ï¼‰
- CSS æ¨¡å—ä¸ç»„ä»¶åŒå

## ğŸ” å®‰å…¨æ€§

### ç‰ˆæœ¬ç®¡ç†
- ä½¿ç”¨ pnpm çš„ lock æ–‡ä»¶ç¡®ä¿ç‰ˆæœ¬ä¸€è‡´
- å®šæœŸæ£€æŸ¥ä¾èµ–å®‰å…¨æ¼æ´ï¼š`pnpm audit`

### ç¯å¢ƒå˜é‡
- ä»…åœ¨æ„å»ºæ—¶éœ€è¦çš„æ•æ„Ÿä¿¡æ¯æ”¾åœ¨ .env æ–‡ä»¶
- ä¸è¦æäº¤ .env åˆ°ç‰ˆæœ¬æ§åˆ¶åº“

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [Vite å®˜æ–¹æ–‡æ¡£](https://vite.dev/)
- [React å®˜ç½‘](https://react.dev/)
- [Sharp å›¾ç‰‡å¤„ç†åº“](https://sharp.pixelplumbing.com/)
- [CDN éƒ¨ç½²æŒ‡å—](./docs/CDN-DEPLOYMENT.md)
- [å›¾ç‰‡ä¼˜åŒ–åˆ†ææŠ¥å‘Š](./IMAGE_OPTIMIZATION_REPORT.md)

---

**æœ€åæ›´æ–°**: 2026å¹´2æœˆ21æ—¥
**ç»´æŠ¤è€…**: NewNanCity å¼€å‘å›¢é˜Ÿ
